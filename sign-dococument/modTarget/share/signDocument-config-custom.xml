<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<alfresco-configuration>
    <config condition="signDocument:signdocument" evaluator="task-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="bpm:description"/>
                    <show id="packageItems"/>
                    <show id="signDocument:password"/>
                    <show id="transitions"/>
                </field-visibility>
                <appearance>
                    <set appearance="title" label-id="Sign Document" id="info"/>
                    <field set="info" label-id="workflow.field.message" id="bpm:description">
                        <control template="/org/alfresco/components/form/controls/info.ftl"/>
                    </field>
                    <set appearance="title" label-id="Document" id="document"/>
                    <field set="document" id="packageItems"/>
                    <set appearance="title" label-id="Sign" id="sign"/>
                    <field set="sign" label-id="Password" id="signDocument:password">
                        <control template="/org/alfresco/components/form/controls/textfield.ftl">
                            <control-param name="password"/>
                        </control>
                    </field>
                    <set id="response"/>
                    <field set="response" id="transitions">
                        <control template="/org/alfresco/components/form/controls/workflow/activiti-transitions.ftl">
                            <control-param name="options">Next|Sign</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>
    <config condition="activiti$signDocument" evaluator="string-compare">
        <forms>
            <form>
                <field-visibility>
                    <show id="bpm:assignee"/>
                    <show id="bpm:workflowDescription"/>
                    <show id="packageItems"/>
                    <show id="transitions"/>
                </field-visibility>
                <appearance>
                    <set appearance="title" label-id="Request Signature" id="info"/>
                    <field set="info" label-id="workflow.field.assign_to" id="bpm:assignee"/>
                    <field set="info" label-id="workflow.field.message" id="bpm:workflowDescription">
                        <control template="/org/alfresco/components/form/controls/textarea.ftl"/>
                    </field>
                    <set appearance="title" label-id="Document" id="document"/>
                    <field set="document" id="packageItems"/>
                    <set id="response"/>
                    <field set="response" id="transitions"/>
                </appearance>
            </form>
        </forms>
    </config>
    <config condition="signDocument:start" evaluator="task-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="bpm:assignee"/>
                    <show id="bpm:workflowDescription"/>
                    <show id="packageItems"/>
                    <show id="transitions"/>
                </field-visibility>
                <appearance>
                    <set appearance="title" label-id="Request Signature" id="info"/>
                    <field set="info" label-id="workflow.field.assign_to" id="bpm:assignee"/>
                    <field set="info" label-id="workflow.field.message" id="bpm:workflowDescription">
                        <control template="/org/alfresco/components/form/controls/textarea.ftl"/>
                    </field>
                    <set appearance="title" label-id="Document" id="document"/>
                    <field set="document" id="packageItems"/>
                    <set id="response"/>
                    <field set="response" id="transitions"/>
                </appearance>
            </form>
        </forms>
    </config>
</alfresco-configuration>
